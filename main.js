!function(){"use strict";var t={};function e(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}t.p="";const i="popup_active";class s{constructor(t){this._selector=t,this._modal=document.querySelector("".concat(this._selector)),this._handleEscKey=this._handleEscKey.bind(this),this._handleClosePopup=this._handleClosePopup.bind(this)}_handleEscKey(t){"Escape"===t.key&&this.close()}setEventListeners(){this._modal.addEventListener("mouseup",this._handleClosePopup)}_handleClosePopup(t){t.target.classList.contains(i)&&this.close(),t.target.classList.contains("popup__container-close")&&this.close()}open(){document.addEventListener("keyup",this._handleEscKey),this._modal.classList.add(i)}close(){document.removeEventListener("keyup",this._handleEscKey),this._modal.classList.remove(i)}}class n extends s{constructor(t){let{selector:e,handleSubmit:i}=t;super(e),this._handleSubmit=i,this._handleSubmit=this._handleSubmit.bind(this),this._handlerWithForm=this._handlerWithForm.bind(this),this._form=this._modal.querySelector(".popup-edit"),this._inputFields=[...this._form.querySelectorAll(".popup-edit__field")]}getInputValues(){const t={};return this._inputFields.forEach((e=>{t[e.name]=e.value})),t}open(t){t&&this._setInputValues(t),super.open()}_setInputValues(t){this._inputFields.forEach((e=>{Object.keys(t).forEach((i=>{e.name===i&&(e.value=t[i])}))}))}_handlerWithForm(t){t.preventDefault(),this._handleSubmit(this.getInputValues()),this.close()}setEventListeners(){this._form.addEventListener("submit",this._handlerWithForm),super.setEventListeners()}close(){super.close(),setTimeout((()=>this._form.reset()),500)}}var r=t.p+"70b05f1de5958b9cceb8.png",o=t.p+"ca15aa5935d8be081eaa.png",a=t.p+"b9b331806393d4bf6e61.png",l=t.p+"5a4294ef9ff4b49491bd.jpg",c=t.p+"7dfd6e25a55c92a9bdd3.jpg",h=t.p+"db1c91c5d15366a0295b.jpg";const d=document.querySelector(".profile__edit-button"),_=document.querySelector(".profile__add-btn"),u=[{imgTitle:"Yosemite Valley",imgLink:r,alt:"Yosemite el capitan"},{imgTitle:"Lake Louise",imgLink:o,alt:"Lake Louise"},{imgTitle:"Bald Mountains",imgLink:a,alt:"Bald Mountains"},{imgTitle:"Latemar",imgLink:l,alt:"Latemar"},{imgTitle:"Vanoise National Park",imgLink:c,alt:"Vanoise National Park"},{imgTitle:"Lago di Braies",imgLink:h,alt:"Lago di Braies"}],m=new class{constructor(t,e){let{items:i,renderer:s}=t;this._renderItems=i,this._renderer=s,this._container=document.querySelector(e)}addItem(t){const e=this._renderer(t);this._container.prepend(e)}_clear(){this._container.innerHTML=""}renderAll(){this._clear(),this._renderItems.forEach((t=>{this.addItem(t)}))}}({items:u,renderer:t=>function(t){const e=new class{constructor(t,e,i){let{imgTitle:s,imgLink:n}=t;this._name=s,this._src=n,this._selector=e,this._hanldeImgClick=i}_getTemplate(){const t=document.querySelector("".concat(this._selector)).content.cloneNode(!0);return this._img=t.querySelector(".card__img"),this._caption=t.querySelector(".card__caption"),this._trash=t.querySelector(".card__trash"),this._like=t.querySelector(".card__like-btn"),t}makeCard(){return this._element=this._getTemplate(),this._img.setAttribute("src",this._src),this._img.setAttribute("alt",this._name),this._caption.textContent=this._name,this._addListeners(),this._element}_addListeners(){this._like.addEventListener("click",(()=>this._handleLikeBtn())),this._img.addEventListener("click",(()=>this._hanldeImgClick({name:this._name,src:this._src}))),this._trash.addEventListener("click",(t=>t.target.closest(".card").remove()))}_handleLikeBtn(){this._like.classList.toggle("card__like-btn_active")}}({imgTitle:t.imgTitle,imgLink:t.imgLink},"#card",(t=>{p.open(t)}));return e.makeCard()}(t)},".gallery");m.renderAll();const p=new class extends s{constructor(t){super(t),this._image=this._modal.querySelector(".img-popout__img"),this._caption=this._modal.querySelector(".img-popout__caption")}open(t){this._image.src=t.src,this._image.alt=t.name,this._caption.textContent=t.name,super.open()}}("#imgPopup");p.setEventListeners();const g=new n({selector:"#profilePopup",handleSubmit:()=>{L.setUserInfo(g.getInputValues()),g.close()}});g.setEventListeners();const b=new n({selector:"#addCardPopup",handleSubmit:t=>{m.addItem(t)}});b.setEventListeners();const L=new class{constructor(t){this._nameSelector=t.nameSelector,this._jobSelector=t.jobSelector,this._nameNode=document.querySelector("".concat(this._nameSelector)),this._jobNode=document.querySelector("".concat(this._jobSelector))}getUserInfo(){return this._name=this._nameNode.textContent,this._job=this._jobNode.textContent,{name:this._name,about:this._job}}setUserInfo(t){this._nameNode.textContent=t.name,this._jobNode.textContent=t.about}}({nameSelector:".profile__user-name",jobSelector:".profile__user-about"}),f={};var E;E={formSelector:".popup-edit",inputSelector:".popup-edit__field",submitButtonSelector:".popup-edit__submit",inactiveButtonClass:"",inputErrorClass:"popup-edit__field_error",errorClass:"popup-edit__error-msg_inactive"},Array.from(document.querySelectorAll(E.formSelector)).forEach((t=>{const i=new class{constructor(t,i){e(this,"_hideOrShowError",(t=>{t.validity.valid?this._hideInputError(t):this._showInputError(t,t.validationMessage)})),e(this,"_showInputError",((t,e)=>{const i=this._formElement.querySelector("#".concat(t.getAttribute("name")));t.classList.add(this._settings.inputErrorClass),i.textContent=e,i.classList.remove(this._settings.errorClass)})),e(this,"_hideInputError",(t=>{const e=this._formElement.querySelector("#".concat(t.getAttribute("name")));t.classList.remove(this._settings.inputErrorClass),e.classList.add(this._settings.errorClass),e.textContent=""})),e(this,"_hasInvalidInput",(t=>t.some((t=>!t.validity.valid)))),this._settings=t,this._formElement=i,this._inputList=Array.from(this._formElement.querySelectorAll(this._settings.inputSelector)),this._btnElement=this._formElement.querySelector(this._settings.submitButtonSelector)}resetValidation(){this._toggleBtnState(),this._inputList.forEach((t=>{this._hideInputError(t)}))}enableValidation(){this._toggleBtnState(),this.resetValidation(),this._inputList.forEach((t=>{t.addEventListener("input",(()=>{this._hideOrShowError(t),this._toggleBtnState()}))}))}_toggleBtnState(){this._hasInvalidInput(this._inputList)?this._btnElement.setAttribute("disabled",""):this._btnElement.removeAttribute("disabled","")}}(E,t),s=t.getAttribute("name");f[s]=i,i.enableValidation()})),d.addEventListener("click",(function(){const t=L.getUserInfo();g.open(t),f.editProfileForm.resetValidation()})),_.addEventListener("click",(function(){f.addCardForm.resetValidation(),b.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dF80L3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm1zLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0cy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9wYWdlL2luZGV4LmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZXMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjsiLCJjb25zdCBQT1BVUF9BQ1RJVkVfQ0xBU1MgPSBcInBvcHVwX2FjdGl2ZVwiO1xyXG5jb25zdCBQT1BVUF9DTE9TRV9CVE5fU0VMRUNUT1IgPSBcInBvcHVwX19jb250YWluZXItY2xvc2VcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3RvcihzZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fc2VsZWN0b3IgPSBzZWxlY3RvcjtcclxuICAgIHRoaXMuX21vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgJHt0aGlzLl9zZWxlY3Rvcn1gKTtcclxuICAgIHRoaXMuX2hhbmRsZUVzY0tleSA9IHRoaXMuX2hhbmRsZUVzY0tleS5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5faGFuZGxlQ2xvc2VQb3B1cCA9IHRoaXMuX2hhbmRsZUNsb3NlUG9wdXAuYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVFc2NLZXkoZXZ0KSB7XHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX21vZGFsLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIHRoaXMuX2hhbmRsZUNsb3NlUG9wdXApO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUNsb3NlUG9wdXAoZXZ0KSB7XHJcbiAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoUE9QVVBfQUNUSVZFX0NMQVNTKSkge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoUE9QVVBfQ0xPU0VfQlROX1NFTEVDVE9SKSkge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMuX2hhbmRsZUVzY0tleSk7XHJcbiAgICB0aGlzLl9tb2RhbC5jbGFzc0xpc3QuYWRkKFBPUFVQX0FDVElWRV9DTEFTUyk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLl9oYW5kbGVFc2NLZXkpO1xyXG4gICAgdGhpcy5fbW9kYWwuY2xhc3NMaXN0LnJlbW92ZShQT1BVUF9BQ1RJVkVfQ0xBU1MpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmNvbnN0IEZPUk1fU0VMRUNUT1IgPSBcIi5wb3B1cC1lZGl0XCI7XHJcbmNvbnN0IEZPUk1fSU5QVVRfRklFTERfU0VMRUNUT1IgPSBcIi5wb3B1cC1lZGl0X19maWVsZFwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybXMgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoeyBzZWxlY3RvciwgaGFuZGxlU3VibWl0IH0pIHtcclxuICAgIHN1cGVyKHNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCA9IGhhbmRsZVN1Ym1pdDtcclxuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCA9IHRoaXMuX2hhbmRsZVN1Ym1pdC5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5faGFuZGxlcldpdGhGb3JtID0gdGhpcy5faGFuZGxlcldpdGhGb3JtLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fbW9kYWwucXVlcnlTZWxlY3RvcihGT1JNX1NFTEVDVE9SKTtcclxuICAgIHRoaXMuX2lucHV0RmllbGRzID0gW1xyXG4gICAgICAuLi50aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoRk9STV9JTlBVVF9GSUVMRF9TRUxFQ1RPUiksXHJcbiAgICBdO1xyXG4gIH1cclxuXHJcbiAgZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHt9O1xyXG4gICAgdGhpcy5faW5wdXRGaWVsZHMuZm9yRWFjaCgoZmllbGQpID0+IHtcclxuICAgICAgaW5wdXRWYWx1ZXNbZmllbGQubmFtZV0gPSBmaWVsZC52YWx1ZTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGlucHV0VmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgb3BlbihkYXRhKSB7XHJcbiAgICBpZiAoZGF0YSkgdGhpcy5fc2V0SW5wdXRWYWx1ZXMoZGF0YSk7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgfVxyXG5cclxuICBfc2V0SW5wdXRWYWx1ZXModmFsdWVzKSB7XHJcbiAgICB0aGlzLl9pbnB1dEZpZWxkcy5mb3JFYWNoKChmaWVsZCkgPT4ge1xyXG4gICAgICBPYmplY3Qua2V5cyh2YWx1ZXMpLmZvckVhY2goKGtleSkgPT4ge1xyXG4gICAgICAgIGlmIChmaWVsZC5uYW1lID09PSBrZXkpIHtcclxuICAgICAgICAgIGZpZWxkLnZhbHVlID0gdmFsdWVzW2tleV07XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZXJXaXRoRm9ybShldnQpIHtcclxuICAgIHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCh0aGlzLmdldElucHV0VmFsdWVzKCkpO1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIHRoaXMuX2hhbmRsZXJXaXRoRm9ybSk7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLl9mb3JtLnJlc2V0KCksIDUwMCk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB5b3NlbWl0ZSBmcm9tIFwiLi4vLi4vaW1hZ2VzL2tpcmlsbC1wZXJzaGluLTEwODg0MDQtdW5zcGxhc2gucG5nXCI7XHJcbmltcG9ydCBsTG91aXNlIGZyb20gXCIuLi8uLi9pbWFnZXMva2lyaWxsLXBlcnNoaW4tMTQwNDY4MS11bnNwbGFzaC5wbmdcIjtcclxuaW1wb3J0IGJNb3VudGFpbnMgZnJvbSBcIi4uLy4uL2ltYWdlcy9raXJpbGwtcGVyc2hpbi0xNTU2MzU1LXVuc3BsYXNoLnBuZ1wiO1xyXG5pbXBvcnQgbGF0ZW1hciBmcm9tIFwiLi4vLi4vaW1hZ2VzL3BldGVyLXN0ZWluZXItRnJxaVhEeHhPR3MtdW5zcGxhc2guanBnXCI7XHJcbmltcG9ydCB2YW5vaXNlIGZyb20gXCIuLi8uLi9pbWFnZXMvZnJleXN0ZWlubi1nLWpvbnNzb24tRWJrMU1CZXJwd28tdW5zcGxhc2guanBnXCI7XHJcbmltcG9ydCBjYWN0dXMgZnJvbSBcIi4uLy4uL2ltYWdlcy9qZXJlbXktYWxmb3JkLVdoYkxtaGFpdV93LXVuc3BsYXNoLmpwZ1wiO1xyXG5cclxuY29uc3QgYnRuRWRpdFByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIpO1xyXG5jb25zdCBidG5BZGRDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnRuXCIpO1xyXG5cclxuY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIGltZ1RpdGxlOiBcIllvc2VtaXRlIFZhbGxleVwiLFxyXG4gICAgaW1nTGluazogeW9zZW1pdGUsXHJcbiAgICBhbHQ6IFwiWW9zZW1pdGUgZWwgY2FwaXRhblwiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgaW1nVGl0bGU6IFwiTGFrZSBMb3Vpc2VcIixcclxuICAgIGltZ0xpbms6IGxMb3Vpc2UsXHJcbiAgICBhbHQ6IFwiTGFrZSBMb3Vpc2VcIixcclxuICB9LFxyXG4gIHtcclxuICAgIGltZ1RpdGxlOiBcIkJhbGQgTW91bnRhaW5zXCIsXHJcbiAgICBpbWdMaW5rOiBiTW91bnRhaW5zLFxyXG4gICAgYWx0OiBcIkJhbGQgTW91bnRhaW5zXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBpbWdUaXRsZTogXCJMYXRlbWFyXCIsXHJcbiAgICBpbWdMaW5rOiBsYXRlbWFyLFxyXG4gICAgYWx0OiBcIkxhdGVtYXJcIixcclxuICB9LFxyXG4gIHtcclxuICAgIGltZ1RpdGxlOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxyXG4gICAgaW1nTGluazogdmFub2lzZSxcclxuICAgIGFsdDogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICB9LFxyXG4gIHtcclxuICAgIGltZ1RpdGxlOiBcIkxhZ28gZGkgQnJhaWVzXCIsXHJcbiAgICBpbWdMaW5rOiBjYWN0dXMsXHJcbiAgICBhbHQ6IFwiTGFnbyBkaSBCcmFpZXNcIixcclxuICB9LFxyXG5dO1xyXG5cclxuY29uc3Qgc2V0dGluZ3MgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5wb3B1cC1lZGl0XCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIucG9wdXAtZWRpdF9fZmllbGRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXAtZWRpdF9fc3VibWl0XCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwicG9wdXAtZWRpdF9fZmllbGRfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcInBvcHVwLWVkaXRfX2Vycm9yLW1zZ19pbmFjdGl2ZVwiLFxyXG59O1xyXG5cclxuZXhwb3J0IHsgYnRuRWRpdFByb2ZpbGUsIGJ0bkFkZENhcmQsIGluaXRpYWxDYXJkcywgc2V0dGluZ3MgfTtcclxuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9zY3JpcHRzL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlcyBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlcy5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybXMgZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3Jtcy5qc1wiO1xyXG5pbXBvcnQge1xyXG4gIGJ0bkVkaXRQcm9maWxlLFxyXG4gIGJ0bkFkZENhcmQsXHJcbiAgaW5pdGlhbENhcmRzLFxyXG4gIHNldHRpbmdzLFxyXG59IGZyb20gXCIuLi9zY3JpcHRzL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5cclxuZnVuY3Rpb24gY3JlYXRlQ2FyZChpdGVtKSB7XHJcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBuZXcgQ2FyZChcclxuICAgIHsgaW1nVGl0bGU6IGl0ZW0uaW1nVGl0bGUsIGltZ0xpbms6IGl0ZW0uaW1nTGluayB9LFxyXG4gICAgXCIjY2FyZFwiLFxyXG4gICAgKGl0ZW0pID0+IHtcclxuICAgICAgcG9wdXBJbWcub3BlbihpdGVtKTtcclxuICAgIH1cclxuICApO1xyXG4gIHJldHVybiBjYXJkRWxlbWVudC5tYWtlQ2FyZCgpO1xyXG59XHJcblxyXG5jb25zdCBnYWxsZXJ5U2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxyXG4gIHtcclxuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXHJcbiAgICByZW5kZXJlcjogKGl0ZW0pID0+IHtcclxuICAgICAgcmV0dXJuIGNyZWF0ZUNhcmQoaXRlbSk7XHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgXCIuZ2FsbGVyeVwiXHJcbik7XHJcbmdhbGxlcnlTZWN0aW9uLnJlbmRlckFsbCgpO1xyXG5cclxuY29uc3QgcG9wdXBJbWcgPSBuZXcgUG9wdXBXaXRoSW1hZ2VzKFwiI2ltZ1BvcHVwXCIpO1xyXG5wb3B1cEltZy5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuZXhwb3J0IGNvbnN0IGVkaXRQcm9maWxlID0gbmV3IFBvcHVwV2l0aEZvcm1zKHtcclxuICBzZWxlY3RvcjogXCIjcHJvZmlsZVBvcHVwXCIsXHJcbiAgaGFuZGxlU3VibWl0OiAoKSA9PiB7XHJcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyhlZGl0UHJvZmlsZS5nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgIGVkaXRQcm9maWxlLmNsb3NlKCk7XHJcbiAgfSxcclxufSk7XHJcbmVkaXRQcm9maWxlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5leHBvcnQgY29uc3QgYWRkQ2FyZCA9IG5ldyBQb3B1cFdpdGhGb3Jtcyh7XHJcbiAgc2VsZWN0b3I6IFwiI2FkZENhcmRQb3B1cFwiLFxyXG4gIGhhbmRsZVN1Ym1pdDogKGRhdGEpID0+IHtcclxuICAgIGdhbGxlcnlTZWN0aW9uLmFkZEl0ZW0oZGF0YSk7XHJcbiAgfSxcclxufSk7XHJcbmFkZENhcmQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcclxuICBuYW1lU2VsZWN0b3I6IFwiLnByb2ZpbGVfX3VzZXItbmFtZVwiLFxyXG4gIGpvYlNlbGVjdG9yOiBcIi5wcm9maWxlX191c2VyLWFib3V0XCIsXHJcbn0pO1xyXG5cclxuY29uc3QgZm9ybVZhbGlkYXRvcnMgPSB7fTtcclxuY29uc3QgZW5hYmxlVmFsaWRhdGlvbiA9IChzZXR0aW5ncykgPT4ge1xyXG4gIGNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNldHRpbmdzLmZvcm1TZWxlY3RvcikpO1xyXG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbGVtZW50KSA9PiB7XHJcbiAgICBjb25zdCB2YWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgZm9ybUVsZW1lbnQpO1xyXG5cclxuICAgIGNvbnN0IGZvcm1OYW1lID0gZm9ybUVsZW1lbnQuZ2V0QXR0cmlidXRlKFwibmFtZVwiKTtcclxuXHJcbiAgICBmb3JtVmFsaWRhdG9yc1tmb3JtTmFtZV0gPSB2YWxpZGF0b3I7XHJcbiAgICB2YWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuZW5hYmxlVmFsaWRhdGlvbihzZXR0aW5ncyk7XHJcblxyXG5idG5FZGl0UHJvZmlsZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlRWRpdFByb2ZpbGVCdG4pO1xyXG5cclxuYnRuQWRkQ2FyZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlQWRkQ2FyZCk7XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVFZGl0UHJvZmlsZUJ0bigpIHtcclxuICBjb25zdCBkYXRhID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuICBlZGl0UHJvZmlsZS5vcGVuKGRhdGEpO1xyXG4gIGZvcm1WYWxpZGF0b3JzW1wiZWRpdFByb2ZpbGVGb3JtXCJdLnJlc2V0VmFsaWRhdGlvbigpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVBZGRDYXJkKCkge1xyXG4gIGZvcm1WYWxpZGF0b3JzW1wiYWRkQ2FyZEZvcm1cIl0ucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgYWRkQ2FyZC5vcGVuKCk7XHJcbn1cclxuXHJcbmV4cG9ydCB7IHVzZXJJbmZvLCBmb3JtVmFsaWRhdG9ycyB9O1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBzZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcmVuZGVySXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oaXRlbSkge1xyXG4gICAgY29uc3QgY2FyZCA9IHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoY2FyZCk7XHJcbiAgfVxyXG5cclxuICBfY2xlYXIoKSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcclxuICB9XHJcblxyXG4gIHJlbmRlckFsbCgpIHtcclxuICAgIHRoaXMuX2NsZWFyKCk7XHJcblxyXG4gICAgdGhpcy5fcmVuZGVySXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB0aGlzLmFkZEl0ZW0oaXRlbSk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoeyBpbWdUaXRsZSwgaW1nTGluayB9LCBzZWxlY3RvciwgaGFuZGxlcikge1xyXG4gICAgdGhpcy5fbmFtZSA9IGltZ1RpdGxlO1xyXG4gICAgdGhpcy5fc3JjID0gaW1nTGluaztcclxuICAgIHRoaXMuX3NlbGVjdG9yID0gc2VsZWN0b3I7XHJcbiAgICB0aGlzLl9oYW5sZGVJbWdDbGljayA9IGhhbmRsZXI7XHJcbiAgfVxyXG5cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKGAke3RoaXMuX3NlbGVjdG9yfWApXHJcbiAgICAgIC5jb250ZW50LmNsb25lTm9kZSh0cnVlKTtcclxuICAgIHRoaXMuX2ltZyA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1nXCIpO1xyXG4gICAgdGhpcy5fY2FwdGlvbiA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fY2FwdGlvblwiKTtcclxuICAgIHRoaXMuX3RyYXNoID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190cmFzaFwiKTtcclxuICAgIHRoaXMuX2xpa2UgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnRuXCIpO1xyXG5cclxuICAgIHJldHVybiBjYXJkRWxlbWVudDtcclxuICB9XHJcblxyXG4gIG1ha2VDYXJkKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcbiAgICB0aGlzLl9pbWcuc2V0QXR0cmlidXRlKFwic3JjXCIsIHRoaXMuX3NyYyk7XHJcbiAgICB0aGlzLl9pbWcuc2V0QXR0cmlidXRlKFwiYWx0XCIsIHRoaXMuX25hbWUpO1xyXG4gICAgdGhpcy5fY2FwdGlvbi50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9hZGRMaXN0ZW5lcnMoKTtcclxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgX2FkZExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2xpa2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuX2hhbmRsZUxpa2VCdG4oKSk7XHJcbiAgICB0aGlzLl9pbWcuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XHJcbiAgICAgIHRoaXMuX2hhbmxkZUltZ0NsaWNrKHsgbmFtZTogdGhpcy5fbmFtZSwgc3JjOiB0aGlzLl9zcmMgfSlcclxuICAgICk7XHJcbiAgICB0aGlzLl90cmFzaC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT5cclxuICAgICAgZXZ0LnRhcmdldC5jbG9zZXN0KFwiLmNhcmRcIikucmVtb3ZlKClcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlTGlrZUJ0bigpIHtcclxuICAgIHRoaXMuX2xpa2UuY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYnRuX2FjdGl2ZVwiKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IENhcmQ7XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2VzIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihzZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9pbWFnZSA9IHRoaXMuX21vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIuaW1nLXBvcG91dF9faW1nXCIpO1xyXG4gICAgdGhpcy5fY2FwdGlvbiA9IHRoaXMuX21vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIuaW1nLXBvcG91dF9fY2FwdGlvblwiKTtcclxuICB9XHJcblxyXG4gIG9wZW4oZGF0YSkge1xyXG4gICAgdGhpcy5faW1hZ2Uuc3JjID0gZGF0YS5zcmM7XHJcbiAgICB0aGlzLl9pbWFnZS5hbHQgPSBkYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9jYXB0aW9uLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoZGF0YSkge1xyXG4gICAgdGhpcy5fbmFtZVNlbGVjdG9yID0gZGF0YS5uYW1lU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9qb2JTZWxlY3RvciA9IGRhdGEuam9iU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9uYW1lTm9kZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCR7dGhpcy5fbmFtZVNlbGVjdG9yfWApO1xyXG4gICAgdGhpcy5fam9iTm9kZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCR7dGhpcy5fam9iU2VsZWN0b3J9YCk7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHRoaXMuX25hbWUgPSB0aGlzLl9uYW1lTm9kZS50ZXh0Q29udGVudDtcclxuICAgIHRoaXMuX2pvYiA9IHRoaXMuX2pvYk5vZGUudGV4dENvbnRlbnQ7XHJcblxyXG4gICAgcmV0dXJuIHsgbmFtZTogdGhpcy5fbmFtZSwgYWJvdXQ6IHRoaXMuX2pvYiB9O1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8obmV3RGF0YSkge1xyXG4gICAgdGhpcy5fbmFtZU5vZGUudGV4dENvbnRlbnQgPSBuZXdEYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9qb2JOb2RlLnRleHRDb250ZW50ID0gbmV3RGF0YS5hYm91dDtcclxuICB9XHJcbn1cclxuIiwiY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9zZXR0aW5ncyA9IHNldHRpbmdzO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20oXHJcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fc2V0dGluZ3MuaW5wdXRTZWxlY3RvcilcclxuICAgICk7XHJcbiAgICB0aGlzLl9idG5FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgdGhpcy5fc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3JcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICByZXNldFZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl90b2dnbGVCdG5TdGF0ZSgpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fdG9nZ2xlQnRuU3RhdGUoKTtcclxuICAgIHRoaXMucmVzZXRWYWxpZGF0aW9uKCk7XHJcblxyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9oaWRlT3JTaG93RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdG5TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVPclNob3dFcnJvciA9IChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgIGlmIChpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBfc2hvd0lucHV0RXJyb3IgPSAoaW5wdXRFbGVtZW50LCBlcnJvck1zZykgPT4ge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYCMke2lucHV0RWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpfWBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9zZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNc2c7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5lcnJvckNsYXNzKTtcclxuICB9O1xyXG5cclxuICBfaGlkZUlucHV0RXJyb3IgPSAoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmdldEF0dHJpYnV0ZShcIm5hbWVcIil9YFxyXG4gICAgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NldHRpbmdzLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9zZXR0aW5ncy5lcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgfTtcclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dCA9IChpbnB1dExpc3QpID0+IHtcclxuICAgIHJldHVybiBpbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgX3RvZ2dsZUJ0blN0YXRlKCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCh0aGlzLl9pbnB1dExpc3QpKSB7XHJcbiAgICAgIHRoaXMuX2J0bkVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgXCJcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9idG5FbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIsIFwiXCIpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yO1xyXG4iXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsInAiLCJQT1BVUF9BQ1RJVkVfQ0xBU1MiLCJQb3B1cCIsImNvbnN0cnVjdG9yIiwic2VsZWN0b3IiLCJ0aGlzIiwiX3NlbGVjdG9yIiwiX21vZGFsIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiX2hhbmRsZUVzY0tleSIsImJpbmQiLCJfaGFuZGxlQ2xvc2VQb3B1cCIsImV2dCIsImtleSIsImNsb3NlIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJhZGRFdmVudExpc3RlbmVyIiwidGFyZ2V0IiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJvcGVuIiwiYWRkIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInJlbW92ZSIsIlBvcHVwV2l0aEZvcm1zIiwiaGFuZGxlU3VibWl0Iiwic3VwZXIiLCJfaGFuZGxlU3VibWl0IiwiX2hhbmRsZXJXaXRoRm9ybSIsIl9mb3JtIiwiX2lucHV0RmllbGRzIiwicXVlcnlTZWxlY3RvckFsbCIsImdldElucHV0VmFsdWVzIiwiaW5wdXRWYWx1ZXMiLCJmb3JFYWNoIiwiZmllbGQiLCJuYW1lIiwidmFsdWUiLCJkYXRhIiwiX3NldElucHV0VmFsdWVzIiwidmFsdWVzIiwiT2JqZWN0Iiwia2V5cyIsInByZXZlbnREZWZhdWx0Iiwic2V0VGltZW91dCIsInJlc2V0IiwiYnRuRWRpdFByb2ZpbGUiLCJidG5BZGRDYXJkIiwiaW5pdGlhbENhcmRzIiwiaW1nVGl0bGUiLCJpbWdMaW5rIiwieW9zZW1pdGUiLCJhbHQiLCJsTG91aXNlIiwiYk1vdW50YWlucyIsImxhdGVtYXIiLCJ2YW5vaXNlIiwiY2FjdHVzIiwiZ2FsbGVyeVNlY3Rpb24iLCJpdGVtcyIsInJlbmRlcmVyIiwiX3JlbmRlckl0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImFkZEl0ZW0iLCJpdGVtIiwiY2FyZCIsInByZXBlbmQiLCJfY2xlYXIiLCJpbm5lckhUTUwiLCJyZW5kZXJBbGwiLCJjYXJkRWxlbWVudCIsImhhbmRsZXIiLCJfbmFtZSIsIl9zcmMiLCJfaGFubGRlSW1nQ2xpY2siLCJfZ2V0VGVtcGxhdGUiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2ltZyIsIl9jYXB0aW9uIiwiX3RyYXNoIiwiX2xpa2UiLCJtYWtlQ2FyZCIsIl9lbGVtZW50Iiwic2V0QXR0cmlidXRlIiwidGV4dENvbnRlbnQiLCJfYWRkTGlzdGVuZXJzIiwiX2hhbmRsZUxpa2VCdG4iLCJzcmMiLCJjbG9zZXN0IiwidG9nZ2xlIiwicG9wdXBJbWciLCJjcmVhdGVDYXJkIiwiX2ltYWdlIiwiZWRpdFByb2ZpbGUiLCJ1c2VySW5mbyIsInNldFVzZXJJbmZvIiwiYWRkQ2FyZCIsIl9uYW1lU2VsZWN0b3IiLCJuYW1lU2VsZWN0b3IiLCJfam9iU2VsZWN0b3IiLCJqb2JTZWxlY3RvciIsIl9uYW1lTm9kZSIsIl9qb2JOb2RlIiwiZ2V0VXNlckluZm8iLCJfam9iIiwiYWJvdXQiLCJuZXdEYXRhIiwiZm9ybVZhbGlkYXRvcnMiLCJzZXR0aW5ncyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiQXJyYXkiLCJmcm9tIiwiZm9ybUVsZW1lbnQiLCJ2YWxpZGF0b3IiLCJpbnB1dEVsZW1lbnQiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJlcnJvck1zZyIsImVycm9yRWxlbWVudCIsIl9mb3JtRWxlbWVudCIsImdldEF0dHJpYnV0ZSIsIl9zZXR0aW5ncyIsImlucHV0TGlzdCIsInNvbWUiLCJfaW5wdXRMaXN0IiwiX2J0bkVsZW1lbnQiLCJyZXNldFZhbGlkYXRpb24iLCJfdG9nZ2xlQnRuU3RhdGUiLCJlbmFibGVWYWxpZGF0aW9uIiwiX2hpZGVPclNob3dFcnJvciIsIl9oYXNJbnZhbGlkSW5wdXQiLCJyZW1vdmVBdHRyaWJ1dGUiLCJmb3JtTmFtZSJdLCJzb3VyY2VSb290IjoiIn0=