!function(){"use strict";function e(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const t="popup_active";class s{constructor(e){this._selector=e,this._modal=document.querySelector("".concat(this._selector)),this._handleEscKey=this._handleEscKey.bind(this),this._handleClosePopup=this._handleClosePopup.bind(this)}_handleEscKey(e){"Escape"===e.key&&this.close()}setEventListeners(){this._modal.addEventListener("mouseup",this._handleClosePopup)}_handleClosePopup(e){e.target.classList.contains(t)&&this.close(),e.target.classList.contains("popup__container-close")&&this.close()}open(){document.addEventListener("keyup",this._handleEscKey),this._modal.classList.add(t)}close(){document.removeEventListener("keyup",this._handleEscKey),this._modal.classList.remove(t)}}class i extends s{constructor(e){let{selector:t,handleSubmit:s,loadingBtnText:i}=e;super(t),this._handleSubmit=s,this._handleSubmit=this._handleSubmit.bind(this),this._handlerWithForm=this._handlerWithForm.bind(this),this._form=this._modal.querySelector(".popup__form"),this._inputFields=[...this._form.querySelectorAll(".popup__form-field")],this._submitBtn=this._modal.querySelector(".popup__form-submit"),this._btnInitText=this._submitBtn.textContent,this._loadingBtnText=i}_getInputValues(){const e={};return this._inputFields.forEach((t=>{e[t.id]=t.value})),e}open(e){e&&this._setInputValues(e),super.open()}_setInputValues(e){this._inputFields.forEach((t=>{Object.keys(e).forEach((s=>{t.id===s&&(t.value=e[s])}))}))}_handlerWithForm(e){e.preventDefault(),this._handleSubmit(this._getInputValues())}showLoading(){this._submitBtn.textContent=this._loadingBtnText}hideLoading(){this._submitBtn.textContent=this._btnInitText}setEventListeners(){this._form.addEventListener("submit",this._handlerWithForm),super.setEventListeners()}close(){super.close(),setTimeout((()=>this._form.reset()),500)}}const n=document.querySelector(".profile__edit-button"),r=document.querySelector(".profile__add-btn"),o=document.querySelector(".profile__picture-button"),a=new class{constructor(e){let{baseURL:t,headers:s}=e;var i,n;n=e=>e.ok?e.json():Promise.reject("Error: ".concat(e.statusText)),(i="_processResponse")in this?Object.defineProperty(this,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[i]=n,this._baseURL=t,this._headers=s}getUserInfo(){return fetch("".concat(this._baseURL,"/users/me"),{headers:this._headers}).then(this._processResponse)}getInitialCards(){return fetch("".concat(this._baseURL,"/cards"),{headers:this._headers}).then((e=>this._processResponse(e)))}patchUserInfo(e){return fetch("".concat(this._baseURL,"users/me"),{headers:this._headers,method:"PATCH",body:JSON.stringify(e)}).then((e=>this._processResponse(e)))}postNewCard(e){return fetch("".concat(this._baseURL,"/cards"),{headers:this._headers,method:"POST",body:JSON.stringify(e)}).then((e=>this._processResponse(e)))}deleteCard(e){return fetch("".concat(this._baseURL,"/cards/").concat(e),{headers:this._headers,method:"DELETE"}).then((e=>this._processResponse(e)))}addLike(e){return fetch("".concat(this._baseURL,"cards/likes/").concat(e),{headers:this._headers,method:"PUT"}).then((e=>this._processResponse(e)))}removeLike(e){return fetch("".concat(this._baseURL,"cards/likes/").concat(e),{headers:this._headers,method:"DELETE"}).then((e=>this._processResponse(e)))}changeAvatar(e){return fetch("".concat(this._baseURL,"users/me/avatar"),{headers:this._headers,method:"PATCH",body:JSON.stringify({avatar:e})}).then((e=>this._processResponse(e)))}getInitialData(){return Promise.all([a.getUserInfo(),a.getInitialCards()])}}({baseURL:"https://around.nomoreparties.co/v1/cohort-3-en/",headers:{authorization:"".concat("a71d10a8-c3e4-4a43-bbbc-db81e488ab20"),"Content-Type":"application/json"}}),h=new class{constructor(e){let{renderer:t,selector:s}=e;this._renderer=t,this._container=document.querySelector(s)}addItem(e){const t=this._renderer(e);this._container.prepend(t)}_clear(){this._container.innerHTML=""}renderAll(e){this._clear(),e.forEach((e=>{this.addItem(e)}))}}({renderer:function(e){const t=new class{constructor(e,t){let{data:s,handleImg:i,handleDel:n,handleLike:r,userId:o}=e;this._name=s.name,this._src=s.link,this._likesArr=s.likes,this._id=s._id,this.ownerId=s.owner._id,this._selector=t,this._hanldeImgClick=i,this._handleDel=n,this._handleLikeBtn=r,this._userId=o}_getTemplate(){return document.querySelector("".concat(this._selector)).content.cloneNode(!0)}makeCard(){return this._element=this._getTemplate().querySelector(".card"),this._img=this._element.querySelector(".card__img"),this._caption=this._element.querySelector(".card__caption"),this._trash=this._element.querySelector(".card__trash"),this._like=this._element.querySelector(".card__like-btn"),this._likes=this._element.querySelector(".card__like-counter"),this._img.setAttribute("src",this._src),this._img.setAttribute("alt",this._name),this._caption.textContent=this._name,this._renderLikes(),this._addListeners(),this._userId!=this.ownerId&&this._trash.remove(),this._element.setAttribute("id",this._id),this._element}_addListeners(){this._like.addEventListener("click",(()=>this._handleLikeBtn())),this._img.addEventListener("click",(()=>this._hanldeImgClick({name:this._name,src:this._src}))),this._trash.addEventListener("click",(()=>this._handleDel(this._id)))}updateLikes(e){this._likesArr=e,this._renderLikes()}isLiked(){return this._likesArr.some((e=>e._id===this._userId))}_renderLikes(){this._likes.textContent=this._likesArr.length,this.isLiked()?this._like.classList.add("card__like-btn_active"):this._like.classList.remove("card__like-btn_active")}remove(){this._element.remove(),this._element=null}}({data:e,userId:m.getUserId(),handleImg:e=>{l.open(e)},handleDel:e=>{u.open(),u.setAction((()=>{u.showLoading(),a.deleteCard(e).then((()=>{t.remove(),u.close()})).catch((e=>console.log(e))).finally((()=>u.hideLoading()))}))},handleLike:()=>{t.isLiked()?a.removeLike(t._id).then((e=>{t.updateLikes(e.likes)})).catch(console.error):a.addLike(t._id).then((e=>{t.updateLikes(e.likes)})).catch(console.error)}},"#card");return t.makeCard()},selector:".gallery"}),l=new class extends s{constructor(e){super(e),this._image=this._modal.querySelector(".img-popout__img"),this._caption=this._modal.querySelector(".img-popout__caption")}open(e){this._image.src=e.src,this._image.alt=e.name,this._caption.textContent=e.name,super.open()}}("#imgPopup");l.setEventListeners();const c=new i({selector:"#avatar",handleSubmit:e=>{c.showLoading(),a.changeAvatar(e.avatarLink).then((e=>{m.setUserAvatar(e.avatar),c.close()})).catch((e=>console.log(e))).finally((()=>c.hideLoading()))},loadingBtnText:"Saving..."});c.setEventListeners();const d=new i({selector:"#profilePopup",handleSubmit:e=>{d.showLoading(),a.patchUserInfo(e).then((e=>{m.setUserInfo(e),d.close()})).catch((e=>console.log(e))).finally((()=>d.hideLoading()))},loadingBtnText:"Saving..."});d.setEventListeners();const _=new i({selector:"#addCardPopup",handleSubmit:e=>{_.showLoading(),a.postNewCard({name:e.title,link:e.imgLink}).then((e=>{h.addItem(e),_.close()})).catch((e=>console.log(e))).finally((()=>_.hideLoading()))},loadingBtnText:"Saving..."});_.setEventListeners();const u=new class extends s{constructor(e){let{selector:t,loadingBtnText:s}=e;super(t),this._submitBtn=this._modal.querySelector(".popup__form-submit"),this._btnInitText=this._submitBtn.textContent,this._loadingBtnText=s}setAction(e){this._handleSubmit=e}showLoading(){this._submitBtn.textContent=this._loadingBtnText}hideLoading(){this._submitBtn.textContent=this._btnInitText}setEventListeners(){this._modal.querySelector(".popup__form-submit").addEventListener("mouseup",(e=>{this._handleSubmit(e)})),super.setEventListeners()}}({selector:"#cardDelete",loadingBtnText:"Deleting..."});u.setEventListeners();const m=new class{constructor(e){this._nameSelector=e.nameSelector,this._jobSelector=e.jobSelector,this._nameNode=document.querySelector("".concat(this._nameSelector)),this._jobNode=document.querySelector("".concat(this._jobSelector)),this._pictureNode=document.querySelector(".profile__picture")}getUserInfo(){return this._name=this._nameNode.textContent,this._job=this._jobNode.textContent,{name:this._name,about:this._job}}setUserInfo(e){this._nameNode.textContent=e.name,this._jobNode.textContent=e.about}setUserAvatar(e){this._pictureNode.src=e}getUserId(){return this._id}setUserId(e){this._id=e}}({nameSelector:".profile__user-name",jobSelector:".profile__user-about"}),p={};var b;b={formSelector:".popup__form",inputSelector:".popup__form-field",submitButtonSelector:".popup__form-submit",inactiveButtonClass:"",inputErrorClass:"popup__form-field_error",errorClass:"popup__form-error-msg_inactive"},Array.from(document.querySelectorAll(b.formSelector)).forEach((t=>{const s=new class{constructor(t,s){e(this,"_hideOrShowError",(e=>{e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)})),e(this,"_showInputError",((e,t)=>{const s=this._formElement.querySelector("#".concat(e.getAttribute("name")));e.classList.add(this._settings.inputErrorClass),s.textContent=t,s.classList.remove(this._settings.errorClass)})),e(this,"_hideInputError",(e=>{const t=this._formElement.querySelector("#".concat(e.getAttribute("name")));e.classList.remove(this._settings.inputErrorClass),t.classList.add(this._settings.errorClass),t.textContent=""})),e(this,"_hasInvalidInput",(e=>e.some((e=>!e.validity.valid)))),this._settings=t,this._formElement=s,this._inputList=Array.from(this._formElement.querySelectorAll(this._settings.inputSelector)),this._btnElement=this._formElement.querySelector(this._settings.submitButtonSelector)}resetValidation(){this._toggleBtnState(),this._inputList.forEach((e=>{this._hideInputError(e)}))}enableValidation(){this._toggleBtnState(),this.resetValidation(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._hideOrShowError(e),this._toggleBtnState()}))}))}_toggleBtnState(){this._hasInvalidInput(this._inputList)?this._btnElement.setAttribute("disabled",!0):this._btnElement.removeAttribute("disabled")}}(b,t),i=t.getAttribute("name");p[i]=s,s.enableValidation()})),a.getInitialData().then((e=>{let[t,s]=e;m.setUserInfo(t),m.setUserAvatar(t.avatar),m.setUserId(t._id),h.renderAll(s)})),o.addEventListener("click",(function(){p.avatarForm.resetValidation(),c.open()})),n.addEventListener("click",(function(){const e=m.getUserInfo();d.open(e),p.editProfileForm.resetValidation()})),r.addEventListener("click",(function(){p.addCardForm.resetValidation(),_.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFVQyxHQUFnQixFQUNwRHBFLEVBQVNrQixZQUFZaUQsR0FDckJuRSxFQUFTZ0IsY0FBY21ELEVBQVN2SCxRQUNoQ29ELEVBQVNpQyxVQUFVa0MsRUFBUzVGLEtBQzVCdkIsRUFBZVUsVUFBVTBHLEVBQXpCLElBR0ZuSixFQUFrQnZDLGlCQUFpQixTQU1uQyxXQUNFd0osRUFBYyxXQUFlMEIsa0JBQzdCOUMsRUFBb0JoSSxNQUNyQixJQVBEaUMsRUFBZXJDLGlCQUFpQixTQVNoQyxXQUNFLE1BQU0yQixFQUFPMkYsRUFBU25FLGNBQ3RCb0YsRUFBaUJuSSxLQUFLdUIsR0FDdEI2SCxFQUFjLGdCQUFvQjBCLGlCQUNuQyxJQVhENUksRUFBV3RDLGlCQUFpQixTQWE1QixXQUNFd0osRUFBYyxZQUFnQjBCLGtCQUM5QnpDLEVBQWFySSxNQUNkLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0cy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9zY3JpcHRzL3V0aWxzL0FwaS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3BhZ2UvaW5kZXguanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1dhcm5Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFBPUFVQX0FDVElWRV9DTEFTUyA9IFwicG9wdXBfYWN0aXZlXCI7XHJcbmNvbnN0IFBPUFVQX0NMT1NFX0JUTl9TRUxFQ1RPUiA9IFwicG9wdXBfX2NvbnRhaW5lci1jbG9zZVwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9zZWxlY3RvciA9IHNlbGVjdG9yO1xyXG4gICAgdGhpcy5fbW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAke3RoaXMuX3NlbGVjdG9yfWApO1xyXG4gICAgdGhpcy5faGFuZGxlRXNjS2V5ID0gdGhpcy5faGFuZGxlRXNjS2V5LmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLl9oYW5kbGVDbG9zZVBvcHVwID0gdGhpcy5faGFuZGxlQ2xvc2VQb3B1cC5iaW5kKHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0tleShldnQpIHtcclxuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fbW9kYWwuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgdGhpcy5faGFuZGxlQ2xvc2VQb3B1cCk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlQ2xvc2VQb3B1cChldnQpIHtcclxuICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhQT1BVUF9BQ1RJVkVfQ0xBU1MpKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhQT1BVUF9DTE9TRV9CVE5fU0VMRUNUT1IpKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5faGFuZGxlRXNjS2V5KTtcclxuICAgIHRoaXMuX21vZGFsLmNsYXNzTGlzdC5hZGQoUE9QVVBfQUNUSVZFX0NMQVNTKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMuX2hhbmRsZUVzY0tleSk7XHJcbiAgICB0aGlzLl9tb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFBPUFVQX0FDVElWRV9DTEFTUyk7XHJcbiAgfVxyXG4gIFxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuY29uc3QgRk9STV9TRUxFQ1RPUiA9IFwiLnBvcHVwX19mb3JtXCI7XHJcbmNvbnN0IEZPUk1fSU5QVVRfRklFTERfU0VMRUNUT1IgPSBcIi5wb3B1cF9fZm9ybS1maWVsZFwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHNlbGVjdG9yLCBoYW5kbGVTdWJtaXQsIGxvYWRpbmdCdG5UZXh0IH0pIHtcclxuICAgIHN1cGVyKHNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCA9IGhhbmRsZVN1Ym1pdDtcclxuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCA9IHRoaXMuX2hhbmRsZVN1Ym1pdC5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5faGFuZGxlcldpdGhGb3JtID0gdGhpcy5faGFuZGxlcldpdGhGb3JtLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fbW9kYWwucXVlcnlTZWxlY3RvcihGT1JNX1NFTEVDVE9SKTtcclxuICAgIHRoaXMuX2lucHV0RmllbGRzID0gW1xyXG4gICAgICAuLi50aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoRk9STV9JTlBVVF9GSUVMRF9TRUxFQ1RPUiksXHJcbiAgICBdO1xyXG4gICAgdGhpcy5fc3VibWl0QnRuID0gdGhpcy5fbW9kYWwucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybS1zdWJtaXRcIik7XHJcbiAgICB0aGlzLl9idG5Jbml0VGV4dCA9IHRoaXMuX3N1Ym1pdEJ0bi50ZXh0Q29udGVudDtcclxuICAgIHRoaXMuX2xvYWRpbmdCdG5UZXh0ID0gbG9hZGluZ0J0blRleHQ7XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHt9O1xyXG4gICAgdGhpcy5faW5wdXRGaWVsZHMuZm9yRWFjaCgoZmllbGQpID0+IHtcclxuICAgICAgaW5wdXRWYWx1ZXNbZmllbGQuaWRdID0gZmllbGQudmFsdWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBpbnB1dFZhbHVlcztcclxuICB9XHJcblxyXG4gIG9wZW4oZGF0YSkge1xyXG4gICAgaWYgKGRhdGEpIHRoaXMuX3NldElucHV0VmFsdWVzKGRhdGEpO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxuXHJcbiAgX3NldElucHV0VmFsdWVzKHZhbHVlcykge1xyXG4gICAgdGhpcy5faW5wdXRGaWVsZHMuZm9yRWFjaCgoZmllbGQpID0+IHtcclxuICAgICAgT2JqZWN0LmtleXModmFsdWVzKS5mb3JFYWNoKChrZXkpID0+IHtcclxuICAgICAgICBpZiAoZmllbGQuaWQgPT09IGtleSkge1xyXG4gICAgICAgICAgZmllbGQudmFsdWUgPSB2YWx1ZXNba2V5XTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlcldpdGhGb3JtKGV2dCkge1xyXG4gICAge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2hvd0xvYWRpbmcoKSB7XHJcbiAgICB0aGlzLl9zdWJtaXRCdG4udGV4dENvbnRlbnQgPSB0aGlzLl9sb2FkaW5nQnRuVGV4dDtcclxuICB9XHJcblxyXG4gIGhpZGVMb2FkaW5nKCkge1xyXG4gICAgdGhpcy5fc3VibWl0QnRuLnRleHRDb250ZW50ID0gdGhpcy5fYnRuSW5pdFRleHQ7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCB0aGlzLl9oYW5kbGVyV2l0aEZvcm0pO1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5fZm9ybS5yZXNldCgpLCA1MDApO1xyXG4gIH1cclxufVxyXG4iLCJjb25zdCBUT0tFTiA9IFwiYTcxZDEwYTgtYzNlNC00YTQzLWJiYmMtZGI4MWU0ODhhYjIwXCI7XHJcbmNvbnN0IGJ0bkVkaXRQcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiKTtcclxuY29uc3QgYnRuQWRkQ2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ0blwiKTtcclxuY29uc3QgYnRuUHJvZmlsZVBpY3R1cmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3BpY3R1cmUtYnV0dG9uXCIpO1xyXG5jb25zdCBzZXR0aW5ncyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIucG9wdXBfX2Zvcm0tZmllbGRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX2Zvcm0tc3VibWl0XCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwicG9wdXBfX2Zvcm0tZmllbGRfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcInBvcHVwX19mb3JtLWVycm9yLW1zZ19pbmFjdGl2ZVwiLFxyXG59O1xyXG5cclxuZXhwb3J0IHsgYnRuRWRpdFByb2ZpbGUsIGJ0bkFkZENhcmQsIHNldHRpbmdzLCBUT0tFTiwgYnRuUHJvZmlsZVBpY3R1cmUgfTtcclxuIiwiaW1wb3J0IHsgVE9LRU4gfSBmcm9tIFwiLi9jb25zdGFudHMuanNcIjtcclxuXHJcbmNsYXNzIEFwaSB7XHJcbiAgY29uc3RydWN0b3IoeyBiYXNlVVJMLCBoZWFkZXJzIH0pIHtcclxuICAgIHRoaXMuX2Jhc2VVUkwgPSBiYXNlVVJMO1xyXG4gICAgdGhpcy5faGVhZGVycyA9IGhlYWRlcnM7XHJcbiAgfVxyXG5cclxuICBfcHJvY2Vzc1Jlc3BvbnNlID0gKHJlcykgPT4ge1xyXG4gICAgcmV0dXJuIHJlcy5vayA/IHJlcy5qc29uKCkgOiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c1RleHR9YCk7XHJcbiAgfTtcclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVSTH0vdXNlcnMvbWVgLCB7IGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMgfSkudGhlbihcclxuICAgICAgIHRoaXMuX3Byb2Nlc3NSZXNwb25zZVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGdldEluaXRpYWxDYXJkcygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVVJMfS9jYXJkc2AsIHsgaGVhZGVyczogdGhpcy5faGVhZGVycyB9KS50aGVuKFxyXG4gICAgICAocmVzKSA9PiB0aGlzLl9wcm9jZXNzUmVzcG9uc2UocmVzKVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIHBhdGNoVXNlckluZm8oZGF0YSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVUkx9dXNlcnMvbWVgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKSxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4gdGhpcy5fcHJvY2Vzc1Jlc3BvbnNlKHJlcykpO1xyXG4gIH1cclxuXHJcbiAgcG9zdE5ld0NhcmQoZGF0YSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVUkx9L2NhcmRzYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKSxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4gdGhpcy5fcHJvY2Vzc1Jlc3BvbnNlKHJlcykpO1xyXG4gIH1cclxuXHJcbiAgZGVsZXRlQ2FyZChpZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVUkx9L2NhcmRzLyR7aWR9YCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHRoaXMuX3Byb2Nlc3NSZXNwb25zZShyZXMpKTtcclxuICB9XHJcblxyXG4gIGFkZExpa2UoaWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVVJMfWNhcmRzL2xpa2VzLyR7aWR9YCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHRoaXMuX3Byb2Nlc3NSZXNwb25zZShyZXMpKTtcclxuICB9XHJcblxyXG4gIHJlbW92ZUxpa2UoaWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVVJMfWNhcmRzL2xpa2VzLyR7aWR9YCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHRoaXMuX3Byb2Nlc3NSZXNwb25zZShyZXMpKTtcclxuICB9XHJcblxyXG4gIGNoYW5nZUF2YXRhcihhdmF0YXIpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVVJMfXVzZXJzL21lL2F2YXRhcmAsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgYXZhdGFyIH0pLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB0aGlzLl9wcm9jZXNzUmVzcG9uc2UocmVzKSk7XHJcbiAgfVxyXG5cclxuICBnZXRJbml0aWFsRGF0YSgpIHtcclxuICAgIHJldHVybiBQcm9taXNlLmFsbChbYXBpLmdldFVzZXJJbmZvKCksIGFwaS5nZXRJbml0aWFsQ2FyZHMoKV0pO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGFwaSA9IG5ldyBBcGkoe1xyXG4gIGJhc2VVUkw6IFwiaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtMy1lbi9cIixcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiBgJHtUT0tFTn1gLFxyXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgfSxcclxufSk7XHJcbiIsImltcG9ydCBcIi4vaW5kZXguY3NzXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9zY3JpcHRzL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQge1xyXG4gIGJ0bkVkaXRQcm9maWxlLFxyXG4gIGJ0bkFkZENhcmQsXHJcbiAgYnRuUHJvZmlsZVBpY3R1cmUsXHJcbiAgc2V0dGluZ3MsXHJcbn0gZnJvbSBcIi4uL3NjcmlwdHMvdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcbmltcG9ydCB7IGFwaSB9IGZyb20gXCIuLi9zY3JpcHRzL3V0aWxzL0FwaS5qc1wiO1xyXG5pbXBvcnQgeyBXYXJuUG9wdXAgfSBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL1dhcm5Qb3B1cFwiO1xyXG5cclxuZnVuY3Rpb24gY3JlYXRlQ2FyZChjYXJkKSB7XHJcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBuZXcgQ2FyZChcclxuICAgIHtcclxuICAgICAgZGF0YTogY2FyZCxcclxuICAgICAgdXNlcklkOiB1c2VySW5mby5nZXRVc2VySWQoKSxcclxuICAgICAgaGFuZGxlSW1nOiAoY2FyZCkgPT4ge1xyXG4gICAgICAgIHBvcHVwSW1nLm9wZW4oY2FyZCk7XHJcbiAgICAgIH0sXHJcbiAgICAgIGhhbmRsZURlbDogKGlkKSA9PiB7XHJcbiAgICAgICAgZGVsV2FyblBvcHVwLm9wZW4oKTtcclxuICAgICAgICBkZWxXYXJuUG9wdXAuc2V0QWN0aW9uKCgpID0+IHtcclxuICAgICAgICAgIGRlbFdhcm5Qb3B1cC5zaG93TG9hZGluZygpO1xyXG4gICAgICAgICAgYXBpXHJcbiAgICAgICAgICAgIC5kZWxldGVDYXJkKGlkKVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgY2FyZEVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgZGVsV2FyblBvcHVwLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKVxyXG4gICAgICAgICAgICAuZmluYWxseSgoKSA9PiBkZWxXYXJuUG9wdXAuaGlkZUxvYWRpbmcoKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0sXHJcbiAgICAgIGhhbmRsZUxpa2U6ICgpID0+IHtcclxuICAgICAgICBpZiAoY2FyZEVsZW1lbnQuaXNMaWtlZCgpKSB7XHJcbiAgICAgICAgICBhcGlcclxuICAgICAgICAgICAgLnJlbW92ZUxpa2UoY2FyZEVsZW1lbnQuX2lkKVxyXG4gICAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcclxuICAgICAgICAgICAgICBjYXJkRWxlbWVudC51cGRhdGVMaWtlcyhyZXNwb25zZS5saWtlcyk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaChjb25zb2xlLmVycm9yKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgYXBpXHJcbiAgICAgICAgICAgIC5hZGRMaWtlKGNhcmRFbGVtZW50Ll9pZClcclxuICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgICAgICAgY2FyZEVsZW1lbnQudXBkYXRlTGlrZXMocmVzcG9uc2UubGlrZXMpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goY29uc29sZS5lcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgfSxcclxuICAgIFwiI2NhcmRcIlxyXG4gICk7XHJcbiAgcmV0dXJuIGNhcmRFbGVtZW50Lm1ha2VDYXJkKCk7XHJcbn1cclxuXHJcbmNvbnN0IGdhbGxlcnlTZWN0aW9uID0gbmV3IFNlY3Rpb24oe1xyXG4gIHJlbmRlcmVyOiBjcmVhdGVDYXJkLFxyXG4gIHNlbGVjdG9yOiBcIi5nYWxsZXJ5XCIsXHJcbn0pO1xyXG5cclxuY29uc3QgcG9wdXBJbWcgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIjaW1nUG9wdXBcIik7XHJcbnBvcHVwSW1nLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBwcm9maWxlUGljdHVyZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xyXG4gIHNlbGVjdG9yOiBcIiNhdmF0YXJcIixcclxuICBoYW5kbGVTdWJtaXQ6IChsaW5rKSA9PiB7XHJcbiAgICBwcm9maWxlUGljdHVyZVBvcHVwLnNob3dMb2FkaW5nKCk7XHJcbiAgICBhcGlcclxuICAgICAgLmNoYW5nZUF2YXRhcihsaW5rLmF2YXRhckxpbmspXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICB1c2VySW5mby5zZXRVc2VyQXZhdGFyKHJlcy5hdmF0YXIpO1xyXG4gICAgICAgIHByb2ZpbGVQaWN0dXJlUG9wdXAuY2xvc2UoKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpXHJcbiAgICAgIC5maW5hbGx5KCgpID0+IHByb2ZpbGVQaWN0dXJlUG9wdXAuaGlkZUxvYWRpbmcoKSk7XHJcbiAgfSxcclxuICBsb2FkaW5nQnRuVGV4dDogXCJTYXZpbmcuLi5cIixcclxufSk7XHJcbnByb2ZpbGVQaWN0dXJlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IGVkaXRQcm9maWxlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XHJcbiAgc2VsZWN0b3I6IFwiI3Byb2ZpbGVQb3B1cFwiLFxyXG4gIGhhbmRsZVN1Ym1pdDogKGRhdGEpID0+IHtcclxuICAgIGVkaXRQcm9maWxlUG9wdXAuc2hvd0xvYWRpbmcoKTtcclxuICAgIGFwaVxyXG4gICAgICAucGF0Y2hVc2VySW5mbyhkYXRhKVxyXG4gICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgdXNlckluZm8uc2V0VXNlckluZm8ocmVzKTtcclxuICAgICAgICBlZGl0UHJvZmlsZVBvcHVwLmNsb3NlKCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKVxyXG5cclxuICAgICAgLmZpbmFsbHkoKCkgPT4gZWRpdFByb2ZpbGVQb3B1cC5oaWRlTG9hZGluZygpKTtcclxuICB9LFxyXG4gIGxvYWRpbmdCdG5UZXh0OiBcIlNhdmluZy4uLlwiLFxyXG59KTtcclxuZWRpdFByb2ZpbGVQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3QgYWRkQ2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xyXG4gIHNlbGVjdG9yOiBcIiNhZGRDYXJkUG9wdXBcIixcclxuICBoYW5kbGVTdWJtaXQ6IChkYXRhKSA9PiB7XHJcbiAgICBhZGRDYXJkUG9wdXAuc2hvd0xvYWRpbmcoKTtcclxuICAgIGFwaVxyXG4gICAgICAucG9zdE5ld0NhcmQoeyBuYW1lOiBkYXRhLnRpdGxlLCBsaW5rOiBkYXRhLmltZ0xpbmsgfSlcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIGdhbGxlcnlTZWN0aW9uLmFkZEl0ZW0ocmVzKTtcclxuICAgICAgICBhZGRDYXJkUG9wdXAuY2xvc2UoKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpXHJcblxyXG4gICAgICAuZmluYWxseSgoKSA9PiBhZGRDYXJkUG9wdXAuaGlkZUxvYWRpbmcoKSk7XHJcbiAgfSxcclxuICBsb2FkaW5nQnRuVGV4dDogXCJTYXZpbmcuLi5cIixcclxufSk7XHJcbmFkZENhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3QgZGVsV2FyblBvcHVwID0gbmV3IFdhcm5Qb3B1cCh7XHJcbiAgc2VsZWN0b3I6IFwiI2NhcmREZWxldGVcIixcclxuICBsb2FkaW5nQnRuVGV4dDogXCJEZWxldGluZy4uLlwiLFxyXG59KTtcclxuZGVsV2FyblBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XHJcbiAgbmFtZVNlbGVjdG9yOiBcIi5wcm9maWxlX191c2VyLW5hbWVcIixcclxuICBqb2JTZWxlY3RvcjogXCIucHJvZmlsZV9fdXNlci1hYm91dFwiLFxyXG59KTtcclxuXHJcbmNvbnN0IGZvcm1WYWxpZGF0b3JzID0ge307XHJcbmNvbnN0IGVuYWJsZVZhbGlkYXRpb24gPSAoc2V0dGluZ3MpID0+IHtcclxuICBjb25zdCBmb3JtTGlzdCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZXR0aW5ncy5mb3JtU2VsZWN0b3IpKTtcclxuICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xyXG4gICAgY29uc3QgdmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50KTtcclxuXHJcbiAgICBjb25zdCBmb3JtTmFtZSA9IGZvcm1FbGVtZW50LmdldEF0dHJpYnV0ZShcIm5hbWVcIik7XHJcblxyXG4gICAgZm9ybVZhbGlkYXRvcnNbZm9ybU5hbWVdID0gdmFsaWRhdG9yO1xyXG4gICAgdmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuICB9KTtcclxufTtcclxuXHJcbmVuYWJsZVZhbGlkYXRpb24oc2V0dGluZ3MpO1xyXG5cclxuYXBpLmdldEluaXRpYWxEYXRhKCkudGhlbigoW3VzZXJEYXRhLCBjYXJkc0FycmF5XSkgPT4ge1xyXG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKHVzZXJEYXRhKTtcclxuICB1c2VySW5mby5zZXRVc2VyQXZhdGFyKHVzZXJEYXRhLmF2YXRhcik7XHJcbiAgdXNlckluZm8uc2V0VXNlcklkKHVzZXJEYXRhLl9pZCk7XHJcbiAgZ2FsbGVyeVNlY3Rpb24ucmVuZGVyQWxsKGNhcmRzQXJyYXkpO1xyXG59KTtcclxuXHJcbmJ0blByb2ZpbGVQaWN0dXJlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVQcm9maWxlUGljdHVyZSk7XHJcblxyXG5idG5FZGl0UHJvZmlsZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlRWRpdFByb2ZpbGVCdG4pO1xyXG5cclxuYnRuQWRkQ2FyZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlQWRkQ2FyZCk7XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVQcm9maWxlUGljdHVyZSgpIHtcclxuICBmb3JtVmFsaWRhdG9yc1snYXZhdGFyRm9ybSddLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIHByb2ZpbGVQaWN0dXJlUG9wdXAub3BlbigpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVFZGl0UHJvZmlsZUJ0bigpIHtcclxuICBjb25zdCBkYXRhID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuICBlZGl0UHJvZmlsZVBvcHVwLm9wZW4oZGF0YSk7XHJcbiAgZm9ybVZhbGlkYXRvcnNbXCJlZGl0UHJvZmlsZUZvcm1cIl0ucmVzZXRWYWxpZGF0aW9uKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUFkZENhcmQoKSB7XHJcbiAgZm9ybVZhbGlkYXRvcnNbXCJhZGRDYXJkRm9ybVwiXS5yZXNldFZhbGlkYXRpb24oKTtcclxuICBhZGRDYXJkUG9wdXAub3BlbigpO1xyXG59XHJcblxyXG5leHBvcnQgeyB1c2VySW5mbywgZm9ybVZhbGlkYXRvcnMgfTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyByZW5kZXJlciwgc2VsZWN0b3IgfSkge1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShpdGVtKSB7XHJcbiAgICBjb25zdCBjYXJkID0gdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChjYXJkKTtcclxuICB9XHJcblxyXG4gIF9jbGVhcigpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyQWxsKGl0ZW1zKSB7XHJcbiAgICB0aGlzLl9jbGVhcigpO1xyXG4gICAgaXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB0aGlzLmFkZEl0ZW0oaXRlbSk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoeyBkYXRhLCBoYW5kbGVJbWcsIGhhbmRsZURlbCwgaGFuZGxlTGlrZSwgdXNlcklkIH0sIHNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fc3JjID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy5fbGlrZXNBcnIgPSBkYXRhLmxpa2VzO1xyXG4gICAgdGhpcy5faWQgPSBkYXRhLl9pZDtcclxuICAgIHRoaXMub3duZXJJZCA9IGRhdGEub3duZXIuX2lkO1xyXG4gICAgdGhpcy5fc2VsZWN0b3IgPSBzZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmxkZUltZ0NsaWNrID0gaGFuZGxlSW1nO1xyXG4gICAgdGhpcy5faGFuZGxlRGVsID0gaGFuZGxlRGVsO1xyXG4gICAgdGhpcy5faGFuZGxlTGlrZUJ0biA9IGhhbmRsZUxpa2U7XHJcbiAgICB0aGlzLl91c2VySWQgPSB1c2VySWQ7XHJcbiAgfVxyXG5cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKGAke3RoaXMuX3NlbGVjdG9yfWApXHJcbiAgICAgIC5jb250ZW50LmNsb25lTm9kZSh0cnVlKTtcclxuICAgIHJldHVybiBjYXJkRWxlbWVudDtcclxuICB9XHJcblxyXG4gIG1ha2VDYXJkKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCkucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpO1xyXG4gICAgdGhpcy5faW1nID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltZ1wiKTtcclxuICAgIHRoaXMuX2NhcHRpb24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fY2FwdGlvblwiKTtcclxuICAgIHRoaXMuX3RyYXNoID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RyYXNoXCIpO1xyXG4gICAgdGhpcy5fbGlrZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ0blwiKTtcclxuICAgIHRoaXMuX2xpa2VzID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtY291bnRlclwiKTtcclxuICAgIHRoaXMuX2ltZy5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgdGhpcy5fc3JjKTtcclxuICAgIHRoaXMuX2ltZy5zZXRBdHRyaWJ1dGUoXCJhbHRcIiwgdGhpcy5fbmFtZSk7XHJcbiAgICB0aGlzLl9jYXB0aW9uLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX3JlbmRlckxpa2VzKCk7XHJcbiAgICB0aGlzLl9hZGRMaXN0ZW5lcnMoKTtcclxuICAgIGlmICh0aGlzLl91c2VySWQgIT0gdGhpcy5vd25lcklkKSB7XHJcbiAgICAgIHRoaXMuX3RyYXNoLnJlbW92ZSgpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5fZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCB0aGlzLl9pZCk7XHJcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcclxuICB9XHJcblxyXG4gIF9hZGRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9saWtlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLl9oYW5kbGVMaWtlQnRuKCkpO1xyXG4gICAgdGhpcy5faW1nLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PlxyXG4gICAgICB0aGlzLl9oYW5sZGVJbWdDbGljayh7IG5hbWU6IHRoaXMuX25hbWUsIHNyYzogdGhpcy5fc3JjIH0pXHJcbiAgICApO1xyXG4gICAgdGhpcy5fdHJhc2guYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuX2hhbmRsZURlbCh0aGlzLl9pZCkpO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlTGlrZXMobGlrZXMpIHtcclxuICAgIHRoaXMuX2xpa2VzQXJyID0gbGlrZXM7XHJcbiAgICB0aGlzLl9yZW5kZXJMaWtlcygpO1xyXG4gIH1cclxuXHJcbiAgaXNMaWtlZCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9saWtlc0Fyci5zb21lKChpdGVtKSA9PiBpdGVtLl9pZCA9PT0gdGhpcy5fdXNlcklkKTtcclxuICB9XHJcblxyXG4gIF9yZW5kZXJMaWtlcygpIHtcclxuICAgIHRoaXMuX2xpa2VzLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXNBcnIubGVuZ3RoO1xyXG4gICAgaWYgKHRoaXMuaXNMaWtlZCgpKSB7XHJcbiAgICAgIHRoaXMuX2xpa2UuY2xhc3NMaXN0LmFkZChcImNhcmRfX2xpa2UtYnRuX2FjdGl2ZVwiKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2xpa2UuY2xhc3NMaXN0LnJlbW92ZShcImNhcmRfX2xpa2UtYnRuX2FjdGl2ZVwiKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlbW92ZSgpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcclxuICB9XHJcbn1cclxuZXhwb3J0IGRlZmF1bHQgQ2FyZDtcclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3RvcihzZWxlY3Rvcikge1xyXG4gICAgc3VwZXIoc2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faW1hZ2UgPSB0aGlzLl9tb2RhbC5xdWVyeVNlbGVjdG9yKFwiLmltZy1wb3BvdXRfX2ltZ1wiKTtcclxuICAgIHRoaXMuX2NhcHRpb24gPSB0aGlzLl9tb2RhbC5xdWVyeVNlbGVjdG9yKFwiLmltZy1wb3BvdXRfX2NhcHRpb25cIik7XHJcbiAgfVxyXG5cclxuICBvcGVuKGRhdGEpIHtcclxuICAgIHRoaXMuX2ltYWdlLnNyYyA9IGRhdGEuc3JjO1xyXG4gICAgdGhpcy5faW1hZ2UuYWx0ID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fY2FwdGlvbi50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgV2FyblBvcHVwIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgc2VsZWN0b3IsIGxvYWRpbmdCdG5UZXh0IH0pIHtcclxuICAgIHN1cGVyKHNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ0biA9IHRoaXMuX21vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm0tc3VibWl0XCIpO1xyXG4gICAgdGhpcy5fYnRuSW5pdFRleHQgPSB0aGlzLl9zdWJtaXRCdG4udGV4dENvbnRlbnQ7XHJcbiAgICB0aGlzLl9sb2FkaW5nQnRuVGV4dCA9IGxvYWRpbmdCdG5UZXh0O1xyXG4gIH1cclxuXHJcbiAgc2V0QWN0aW9uKGFjdGlvbikge1xyXG4gICAgdGhpcy5faGFuZGxlU3VibWl0ID0gYWN0aW9uO1xyXG4gIH1cclxuXHJcbiAgc2hvd0xvYWRpbmcoKSB7XHJcbiAgICB0aGlzLl9zdWJtaXRCdG4udGV4dENvbnRlbnQgPSB0aGlzLl9sb2FkaW5nQnRuVGV4dDtcclxuICB9XHJcblxyXG4gIGhpZGVMb2FkaW5nKCkge1xyXG4gICAgdGhpcy5fc3VibWl0QnRuLnRleHRDb250ZW50ID0gdGhpcy5fYnRuSW5pdFRleHQ7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX21vZGFsXHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtLXN1Ym1pdFwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgKGV2dCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdChldnQpO1xyXG4gICAgICB9KTtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3RvcihkYXRhKSB7XHJcbiAgICB0aGlzLl9uYW1lU2VsZWN0b3IgPSBkYXRhLm5hbWVTZWxlY3RvcjtcclxuICAgIHRoaXMuX2pvYlNlbGVjdG9yID0gZGF0YS5qb2JTZWxlY3RvcjtcclxuICAgIHRoaXMuX25hbWVOb2RlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgJHt0aGlzLl9uYW1lU2VsZWN0b3J9YCk7XHJcbiAgICB0aGlzLl9qb2JOb2RlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgJHt0aGlzLl9qb2JTZWxlY3Rvcn1gKTtcclxuICAgIHRoaXMuX3BpY3R1cmVOb2RlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19waWN0dXJlXCIpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gdGhpcy5fbmFtZU5vZGUudGV4dENvbnRlbnQ7XHJcbiAgICB0aGlzLl9qb2IgPSB0aGlzLl9qb2JOb2RlLnRleHRDb250ZW50O1xyXG5cclxuICAgIHJldHVybiB7IG5hbWU6IHRoaXMuX25hbWUsIGFib3V0OiB0aGlzLl9qb2IgfTtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKG5ld0RhdGEpIHtcclxuICAgIHRoaXMuX25hbWVOb2RlLnRleHRDb250ZW50ID0gbmV3RGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fam9iTm9kZS50ZXh0Q29udGVudCA9IG5ld0RhdGEuYWJvdXQ7XHJcbiAgfVxyXG5cclxuICBzZXRVc2VyQXZhdGFyKGF2YXRhcikge1xyXG4gICAgdGhpcy5fcGljdHVyZU5vZGUuc3JjID0gYXZhdGFyO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlcklkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lkO1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlcklkKGlkKSB7XHJcbiAgICB0aGlzLl9pZCA9IGlkO1xyXG4gIH1cclxufVxyXG5cclxuXHJcbiIsImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5fc2V0dGluZ3MgPSBzZXR0aW5ncztcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxyXG4gICAgICB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX3NldHRpbmdzLmlucHV0U2VsZWN0b3IpXHJcbiAgICApO1xyXG4gICAgdGhpcy5fYnRuRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIHRoaXMuX3NldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fdG9nZ2xlQnRuU3RhdGUoKTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX3RvZ2dsZUJ0blN0YXRlKCk7XHJcbiAgICB0aGlzLnJlc2V0VmFsaWRhdGlvbigpO1xyXG5cclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5faGlkZU9yU2hvd0Vycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnRuU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9oaWRlT3JTaG93RXJyb3IgPSAoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICBpZiAoaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yID0gKGlucHV0RWxlbWVudCwgZXJyb3JNc2cpID0+IHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuZ2V0QXR0cmlidXRlKFwibmFtZVwiKX1gXHJcbiAgICApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTXNnO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3MuZXJyb3JDbGFzcyk7XHJcbiAgfTtcclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yID0gKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYCMke2lucHV0RWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpfWBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuZXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gIH07XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQgPSAoaW5wdXRMaXN0KSA9PiB7XHJcbiAgICByZXR1cm4gaW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIF90b2dnbGVCdG5TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQodGhpcy5faW5wdXRMaXN0KSkge1xyXG4gICAgICB0aGlzLl9idG5FbGVtZW50LnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIHRydWUpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fYnRuRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvcjtcclxuIl0sIm5hbWVzIjpbIlBPUFVQX0FDVElWRV9DTEFTUyIsIlBvcHVwIiwiY29uc3RydWN0b3IiLCJzZWxlY3RvciIsInRoaXMiLCJfc2VsZWN0b3IiLCJfbW9kYWwiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJfaGFuZGxlRXNjS2V5IiwiYmluZCIsIl9oYW5kbGVDbG9zZVBvcHVwIiwiZXZ0Iiwia2V5IiwiY2xvc2UiLCJzZXRFdmVudExpc3RlbmVycyIsImFkZEV2ZW50TGlzdGVuZXIiLCJ0YXJnZXQiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsIm9wZW4iLCJhZGQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwicmVtb3ZlIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZVN1Ym1pdCIsImxvYWRpbmdCdG5UZXh0Iiwic3VwZXIiLCJfaGFuZGxlU3VibWl0IiwiX2hhbmRsZXJXaXRoRm9ybSIsIl9mb3JtIiwiX2lucHV0RmllbGRzIiwicXVlcnlTZWxlY3RvckFsbCIsIl9zdWJtaXRCdG4iLCJfYnRuSW5pdFRleHQiLCJ0ZXh0Q29udGVudCIsIl9sb2FkaW5nQnRuVGV4dCIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0VmFsdWVzIiwiZm9yRWFjaCIsImZpZWxkIiwiaWQiLCJ2YWx1ZSIsImRhdGEiLCJfc2V0SW5wdXRWYWx1ZXMiLCJ2YWx1ZXMiLCJPYmplY3QiLCJrZXlzIiwicHJldmVudERlZmF1bHQiLCJzaG93TG9hZGluZyIsImhpZGVMb2FkaW5nIiwic2V0VGltZW91dCIsInJlc2V0IiwiYnRuRWRpdFByb2ZpbGUiLCJidG5BZGRDYXJkIiwiYnRuUHJvZmlsZVBpY3R1cmUiLCJhcGkiLCJiYXNlVVJMIiwiaGVhZGVycyIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXNUZXh0IiwiX2Jhc2VVUkwiLCJfaGVhZGVycyIsImdldFVzZXJJbmZvIiwiZmV0Y2giLCJ0aGVuIiwiX3Byb2Nlc3NSZXNwb25zZSIsImdldEluaXRpYWxDYXJkcyIsInBhdGNoVXNlckluZm8iLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInBvc3ROZXdDYXJkIiwiZGVsZXRlQ2FyZCIsImFkZExpa2UiLCJyZW1vdmVMaWtlIiwiY2hhbmdlQXZhdGFyIiwiYXZhdGFyIiwiZ2V0SW5pdGlhbERhdGEiLCJhbGwiLCJhdXRob3JpemF0aW9uIiwiZ2FsbGVyeVNlY3Rpb24iLCJyZW5kZXJlciIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJhZGRJdGVtIiwiaXRlbSIsImNhcmQiLCJwcmVwZW5kIiwiX2NsZWFyIiwiaW5uZXJIVE1MIiwicmVuZGVyQWxsIiwiaXRlbXMiLCJjYXJkRWxlbWVudCIsImhhbmRsZUltZyIsImhhbmRsZURlbCIsImhhbmRsZUxpa2UiLCJ1c2VySWQiLCJfbmFtZSIsIm5hbWUiLCJfc3JjIiwibGluayIsIl9saWtlc0FyciIsImxpa2VzIiwiX2lkIiwib3duZXJJZCIsIm93bmVyIiwiX2hhbmxkZUltZ0NsaWNrIiwiX2hhbmRsZURlbCIsIl9oYW5kbGVMaWtlQnRuIiwiX3VzZXJJZCIsIl9nZXRUZW1wbGF0ZSIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJtYWtlQ2FyZCIsIl9lbGVtZW50IiwiX2ltZyIsIl9jYXB0aW9uIiwiX3RyYXNoIiwiX2xpa2UiLCJfbGlrZXMiLCJzZXRBdHRyaWJ1dGUiLCJfcmVuZGVyTGlrZXMiLCJfYWRkTGlzdGVuZXJzIiwic3JjIiwidXBkYXRlTGlrZXMiLCJpc0xpa2VkIiwic29tZSIsImxlbmd0aCIsInVzZXJJbmZvIiwiZ2V0VXNlcklkIiwicG9wdXBJbWciLCJkZWxXYXJuUG9wdXAiLCJzZXRBY3Rpb24iLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJmaW5hbGx5IiwicmVzcG9uc2UiLCJlcnJvciIsIl9pbWFnZSIsImFsdCIsInByb2ZpbGVQaWN0dXJlUG9wdXAiLCJhdmF0YXJMaW5rIiwic2V0VXNlckF2YXRhciIsImVkaXRQcm9maWxlUG9wdXAiLCJzZXRVc2VySW5mbyIsImFkZENhcmRQb3B1cCIsInRpdGxlIiwiaW1nTGluayIsImFjdGlvbiIsIl9uYW1lU2VsZWN0b3IiLCJuYW1lU2VsZWN0b3IiLCJfam9iU2VsZWN0b3IiLCJqb2JTZWxlY3RvciIsIl9uYW1lTm9kZSIsIl9qb2JOb2RlIiwiX3BpY3R1cmVOb2RlIiwiX2pvYiIsImFib3V0IiwibmV3RGF0YSIsInNldFVzZXJJZCIsImZvcm1WYWxpZGF0b3JzIiwic2V0dGluZ3MiLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIkFycmF5IiwiZnJvbSIsImZvcm1FbGVtZW50IiwidmFsaWRhdG9yIiwiaW5wdXRFbGVtZW50IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiZXJyb3JNc2ciLCJlcnJvckVsZW1lbnQiLCJfZm9ybUVsZW1lbnQiLCJnZXRBdHRyaWJ1dGUiLCJfc2V0dGluZ3MiLCJpbnB1dExpc3QiLCJfaW5wdXRMaXN0IiwiX2J0bkVsZW1lbnQiLCJyZXNldFZhbGlkYXRpb24iLCJfdG9nZ2xlQnRuU3RhdGUiLCJlbmFibGVWYWxpZGF0aW9uIiwiX2hpZGVPclNob3dFcnJvciIsIl9oYXNJbnZhbGlkSW5wdXQiLCJyZW1vdmVBdHRyaWJ1dGUiLCJmb3JtTmFtZSIsInVzZXJEYXRhIiwiY2FyZHNBcnJheSJdLCJzb3VyY2VSb290IjoiIn0=